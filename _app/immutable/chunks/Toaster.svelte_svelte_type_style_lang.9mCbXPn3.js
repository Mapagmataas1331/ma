import{c as b,a as k,p as x,i as K,m as Q,u as H}from"./disclose-version.Bc9YyEIu.js";import{z as P,A as R,B as V,C as X,a as Y,D as $,E as ee,F as te,G as ne,U as se,p as M,f as _,c as C,n as F,H as re,v as L,j as q,I as N,y as ie}from"./utils.DgkU9qJm.js";import{b as U,c as oe,n as ue,d as ce,g as fe}from"./language.CsPXyL5P.js";import{w as z,g as A}from"./index.CtCNMdbi.js";function ae(n,s,o){P&&R();var i=n,u=se,a,c=V()?X:Y;$(()=>{c(u,u=s())&&(a&&ee(a),a=te(()=>o(i)))}),P&&(i=ne)}function le(n,s){M(s,!0);var o=b(),i=_(o);ae(i,()=>s.children,u=>{var a=b(),c=_(a);U(c,()=>s.children??F),k(u,a)}),k(n,o),C()}function ve(n,s){M(s,!0);let o=x(s,"to",3,"body");const i=re();let u=ie(a);function a(){if(!oe||s.disabled)return null;let m=null;return typeof o()=="string"?m=document.querySelector(o()):(o()instanceof HTMLElement||o()instanceof DocumentFragment)&&(m=o()),m}let c;L(()=>{if(!q(u)||s.disabled){c&&(H(c),c=null);return}return N(()=>c=Q(le,{target:q(u),props:{children:s.children},context:i})),()=>{c&&(H(c),c=null)}});var p=b(),w=_(p);K(w,()=>s.disabled,m=>{var y=b(),v=_(y);U(v,()=>s.children??F),k(m,y)}),k(n,p),C()}function Te(n,s){M(s,!0);let o=x(s,"isMounted",15,!1),i=x(s,"onMountedChange",3,ue);L(()=>(N(()=>{o(!0),i()(!0)}),()=>{o(!1),i()(!1)})),C()}const de=()=>{if(typeof window<"u"){const n=fe("theme");return n==="dark"||n==="light"?n:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}return"light"},me=z(de());let B=null;me.subscribe(n=>{var s;typeof window<"u"&&n!==B&&(ce("theme",n,365,"ma.cyou"),document.documentElement.classList.toggle("dark",n==="dark"),(s=document.querySelector('meta[name="theme-color"]'))==null||s.setAttribute("content",n==="dark"?"#090a0b":"#ffffff"),B=n)});function Ie(...n){return n.filter(Boolean).join(" ")}const D=typeof document<"u";function S(n){const s=z(n);function o(u){D&&s.set(u)}function i(u){D&&s.update(u)}return{subscribe:s.subscribe,set:o,update:i}}let j=0;function ge(){const n=S([]),s=S([]);function o(t){n.update(e=>[t,...e])}function i(t){var E;const{message:e,...r}=t,l=typeof(t==null?void 0:t.id)=="number"||t.id&&((E=t.id)==null?void 0:E.length)>0?t.id:j++,g=t.dismissable===void 0?!0:t.dismissable,f=t.type===void 0?"default":t.type;return A(n).find(T=>T.id===l)?n.update(T=>T.map(I=>I.id===l?{...I,...t,id:l,title:e,dismissable:g,type:f,updated:!0}:{...I,updated:!1})):o({...r,id:l,title:e,dismissable:g,type:f}),l}function u(t){if(t===void 0){n.update(e=>e.map(r=>({...r,dismiss:!0})));return}return n.update(e=>e.map(r=>r.id===t?{...r,dismiss:!0}:r)),t}function a(t){if(t===void 0){n.set([]);return}return n.update(e=>e.filter(r=>r.id!==t)),t}function c(t,e){return i({...e,type:"default",message:t})}function p(t,e){return i({...e,type:"error",message:t})}function w(t,e){return i({...e,type:"success",message:t})}function m(t,e){return i({...e,type:"info",message:t})}function y(t,e){return i({...e,type:"warning",message:t})}function v(t,e){return i({...e,type:"loading",message:t})}function G(t,e){if(!e)return;let r;e.loading!==void 0&&(r=i({...e,promise:t,type:"loading",message:e.loading}));const l=t instanceof Promise?t:t();let g=r!==void 0;return l.then(f=>{if(f&&typeof f.ok=="boolean"&&!f.ok){g=!1;const h=typeof e.error=="function"?e.error(`HTTP error! status: ${f.status}`):e.error;i({id:r,type:"error",message:h})}else if(e.success!==void 0){g=!1;const h=typeof e.success=="function"?e.success(f):e.success;i({id:r,type:"success",message:h})}}).catch(f=>{if(e.error!==void 0){g=!1;const h=typeof e.error=="function"?e.error(f):e.error;i({id:r,type:"error",message:h})}}).finally(()=>{var f;g&&(u(r),r=void 0),(f=e.finally)==null||f.call(e)}),r}function O(t,e){const r=(e==null?void 0:e.id)||j++;return i({component:t,id:r,...e}),r}function W(t){s.update(e=>e.filter(r=>r.toastId!==t))}function Z(t){if(A(s).find(r=>r.toastId===t.toastId)===void 0){s.update(r=>[t,...r]);return}s.update(r=>r.map(l=>l.toastId===t.toastId?t:l))}function J(){n.set([]),s.set([])}return{create:i,addToast:o,dismiss:u,remove:a,message:c,error:p,success:w,info:m,warning:y,loading:v,promise:G,custom:O,removeHeight:W,setHeight:Z,reset:J,toasts:n,heights:s}}const d=ge();function he(n,s){return d.create({message:n,...s})}const pe=he,xe=Object.assign(pe,{success:d.success,info:d.info,warning:d.warning,error:d.error,custom:d.custom,message:d.message,promise:d.promise,dismiss:d.dismiss,loading:d.loading}),Me=n=>({subscribe:n});export{Te as M,ve as P,xe as a,d as b,Ie as c,me as t,Me as u};
